# System Monitoring Script
–≠—Ç–æ—Ç bash-—Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã, –≤–∫–ª—é—á–∞—è:
* –ó–∞–≥—Ä—É–∑–∫—É CPU
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
* –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ç–∏ –∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
* –°–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ç–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ª–æ–≥-—Ñ–∞–π–ª —Å –¥–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º –≤ `/var/log/monitoring/` –≤ —Ñ–æ—Ä–º–∞—Ç–µ (system_monitoring_YYYYMMDD.log).**
**–õ–æ–≥-—Ñ–∞–π–ª—ã —Å—Ç–∞—Ä—à–µ 10 –¥–Ω–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è.**


## –ß—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç —Å–∫—Ä–∏–ø—Ç (–ø–æ–¥—Ä–æ–±–Ω–µ–µ)
1. –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä (CPU)
* –û–±—â—É—é –Ω–∞–≥—Ä—É–∑–∫—É (user space)
* –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ > 50%

2. –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
* –í—Å–µ —Ä–∞–∑–¥–µ–ª—ã —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º > 20%
* –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏

3. –°–µ—Ç—å
* –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Google (ping)
* –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã (LISTEN)
* –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (ESTABLISHED)
* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (–∫—Ä–∞—Ç–∫–∏–π —Ñ–æ—Ä–º–∞—Ç)
* –¢–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏


## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã
* –î–ª—è —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ root
* –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ CPU (>50%) –≤—ã–≤–æ–¥–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
* –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å ping –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥


## –ó–∞–ø—É—Å–∫
* –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–º –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ c –ø—Ä–∞–≤–∞–º–∏ root
```
cd /–ø—É—Ç—å –¥–æ —Ñ–∞–π–ª–∞/monitoring_system
sudo ./monitoring_system_script.sh
```
* –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø—É—Å–∫
```
sudo chmod +x /–ø—É—Ç—å –¥–æ —Ñ–∞–π–ª–∞/monitoring_system/monitoring_system_script.sh
```


## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–ª—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è, —Ç–æ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è **`cron`**.
* –û—Ç–∫—Ä–æ–π—Ç–µ 'crontab' –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  ```
  sudo crontab -e
  ```
* –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ, –æ–Ω —Å–ø—Ä–æ—Å–∏—Ç –≤ –∫–∞–∫–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ñ–∞–π–ª. –í—ã–±–µ—Ä–∏—Ç–µ —Ü–∏—Ñ—Ä—É –æ—Ç 1 –¥–æ 4.
* –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ—á–∫—É, –∫–æ—Ç–æ—Ä–∞—è –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –µ–∂–µ–¥–∂–Ω–µ–≤–Ω–æ –≤ 12:00
  ```
  0 12 * * * /usr/local/bin/system_monitor.sh
  ```
* –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –≤—ã–π–¥–∏—Ç–µ –∏–∑ —Ñ–∞–π–ª–∞.
* –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—É—â–∏—Ö –∑–∞–¥–∞—á –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ
  ```
  sudo crontab -l
  ```
* –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è
  ```
  sudo crontab -r
  ```

## –û—Ç–∫—Ä—ã—Ç—å –ª–æ–≥-—Ñ–∞–π–ª
```
sudo nano /var/log/monitoring/system_monitoring_*.log
```
–≥–¥–µ –∑–≤–µ–∑–¥–æ—á–∫–∞, —ç—Ç–æ –¥–∞—Ç–∞ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYYMMDD, –Ω–∞–ø—Ä–∏–º–µ—Ä, 20250711

## –ü—Ä–∏–º–µ—Ä –ª–æ–≥-—Ñ–∞–π–ª–∞
```
======== Wed Jan 15 12:00:01 MSK 2025 ========

üîπ CPU Load (filtered > 50%):
CPU load is normal, 15%

üîπ Disk Usage (filtered > 20%):
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1        50G   30G   20G  60% /

üîπ Network Check (ping google.com):
Ping: OK (0% packet loss)

üîπ Listening Ports:
tcp         0.0.0.0:22         LISTEN
tcp         0.0.0.0:80         LISTEN

====================== END ======================
```

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ Python

- `backup.py` - —Å–æ–∑–¥–∞—ë—Ç –∫–æ–ø–∏—é –ø–∞–ø–∫–∏ –∏–ª–∏ —Ñ–∞–π–ª–∞ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –º–µ—Å—Ç–µ —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ—á–∫—É —Å –≤—ã–∑–æ–≤–æ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –ø—É—Ç—å –¥–æ –ø–∞–ø–∫–∏ –∏–ª–∏ —Ñ–∞–π–ª–∞, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å, –∞ –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –Ω–∞ –ø—É—Ç—å, –∫—É–¥–∞ —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å.
  ```
  python3 backup.py
  ```

- `find_errors`.py - –∏—â–µ—Ç –≤ —Ñ–∞–π–ª–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –∏ —Å—á–∏—Ç–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤—Å—Ç—Ä–µ—Ç–∏–ª–æ—Å—å. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Å—Ç–æ–∏—Ç —Å–ª–æ–≤–æ "ERROR".
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ—á–∫—É —Å –≤—ã–∑–æ–≤–æ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è —Ñ–∞–π–ª–∞ –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–ª–∏—á–Ω–æ–µ –æ—Ç "ERROR".

```
python3 find_errors.py
```
